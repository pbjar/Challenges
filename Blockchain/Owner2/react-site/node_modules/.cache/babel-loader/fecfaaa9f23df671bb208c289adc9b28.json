{"ast":null,"code":"/* eslint-disable no-nested-ternary */\nimport { isFunction, isNumber, __DEV__, __TEST__ } from \"./assertion\";\nexport function runIfFn(valueOrFn) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  return isFunction(valueOrFn) ? valueOrFn(...args) : valueOrFn;\n}\nexport function callAllHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function func(event) {\n    fns.some(fn => {\n      fn == null ? void 0 : fn(event);\n      return event == null ? void 0 : event.defaultPrevented;\n    });\n  };\n}\nexport function callAll() {\n  for (var _len3 = arguments.length, fns = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    fns[_key3] = arguments[_key3];\n  }\n\n  return function mergedFn(arg) {\n    fns.forEach(fn => {\n      fn == null ? void 0 : fn(arg);\n    });\n  };\n}\nexport var compose = function compose(fn1) {\n  for (var _len4 = arguments.length, fns = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    fns[_key4 - 1] = arguments[_key4];\n  }\n\n  return fns.reduce((f1, f2) => function () {\n    return f1(f2(...arguments));\n  }, fn1);\n};\nexport function once(fn) {\n  var result;\n  return function func() {\n    if (fn) {\n      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n\n      result = fn.apply(this, args);\n      fn = null;\n    }\n\n    return result;\n  };\n}\nexport var noop = () => {};\nexport var warn = once(options => () => {\n  var {\n    condition,\n    message\n  } = options;\n\n  if (condition && __DEV__) {\n    console.warn(message);\n  }\n});\nexport var error = once(options => () => {\n  var {\n    condition,\n    message\n  } = options;\n\n  if (condition && __DEV__) {\n    console.error(message);\n  }\n});\n\nvar promiseMicrotask = callback => {\n  Promise.resolve().then(callback);\n};\n\nexport var scheduleMicrotask = __TEST__ ? fn => fn() : typeof queueMicrotask === \"function\" ? queueMicrotask : promiseMicrotask;\nexport var pipe = function pipe() {\n  for (var _len6 = arguments.length, fns = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    fns[_key6] = arguments[_key6];\n  }\n\n  return v => fns.reduce((a, b) => b(a), v);\n};\n\nvar distance1D = (a, b) => Math.abs(a - b);\n\nvar isPoint = point => \"x\" in point && \"y\" in point;\n\nexport function distance(a, b) {\n  if (isNumber(a) && isNumber(b)) {\n    return distance1D(a, b);\n  }\n\n  if (isPoint(a) && isPoint(b)) {\n    var xDelta = distance1D(a.x, b.x);\n    var yDelta = distance1D(a.y, b.y);\n    return Math.sqrt(xDelta ** 2 + yDelta ** 2);\n  }\n\n  return 0;\n}","map":{"version":3,"sources":["../../src/function.ts"],"names":["args","isFunction","valueOrFn","fns","fn","event","compose","f1","f2","result","noop","warn","once","options","message","condition","console","error","promiseMicrotask","callback","Promise","scheduleMicrotask","__TEST__","pipe","v","b","distance1D","Math","a","isPoint","point","isNumber","xDelta","yDelta"],"mappings":"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","sourcesContent":["/* eslint-disable no-nested-ternary */\nimport { isFunction, isNumber, __DEV__, __TEST__ } from \"./assertion\"\nimport { AnyFunction, FunctionArguments } from \"./types\"\n\nexport function runIfFn<T, U>(\n  valueOrFn: T | ((...fnArgs: U[]) => T),\n  ...args: U[]\n): T {\n  return isFunction(valueOrFn) ? valueOrFn(...args) : valueOrFn\n}\n\nexport function callAllHandlers<T extends (event: any) => void>(\n  ...fns: (T | undefined)[]\n) {\n  return function func(event: FunctionArguments<T>[0]) {\n    fns.some((fn) => {\n      fn?.(event)\n      return event?.defaultPrevented\n    })\n  }\n}\n\nexport function callAll<T extends AnyFunction>(...fns: (T | undefined)[]) {\n  return function mergedFn(arg: FunctionArguments<T>[0]) {\n    fns.forEach((fn) => {\n      fn?.(arg)\n    })\n  }\n}\n\nexport const compose = <T>(\n  fn1: (...args: T[]) => T,\n  ...fns: Array<(...args: T[]) => T>\n) => fns.reduce((f1, f2) => (...args) => f1(f2(...args)), fn1)\n\nexport function once<T extends AnyFunction>(fn?: T | null) {\n  let result: any\n\n  return function func(this: any, ...args: Parameters<T>) {\n    if (fn) {\n      result = fn.apply(this, args)\n      fn = null\n    }\n\n    return result\n  }\n}\n\nexport const noop = () => {}\n\ntype MessageOptions = {\n  condition: boolean\n  message: string\n}\n\nexport const warn = once((options: MessageOptions) => () => {\n  const { condition, message } = options\n  if (condition && __DEV__) {\n    console.warn(message)\n  }\n})\n\nexport const error = once((options: MessageOptions) => () => {\n  const { condition, message } = options\n  if (condition && __DEV__) {\n    console.error(message)\n  }\n})\n\nconst promiseMicrotask = (callback: VoidFunction) => {\n  Promise.resolve().then(callback)\n}\n\nexport const scheduleMicrotask = __TEST__\n  ? (fn: VoidFunction) => fn()\n  : typeof queueMicrotask === \"function\"\n  ? queueMicrotask\n  : promiseMicrotask\n\nexport const pipe = <R>(...fns: Array<(a: R) => R>) => (v: R) =>\n  fns.reduce((a, b) => b(a), v)\n\nconst distance1D = (a: number, b: number) => Math.abs(a - b)\ntype Point = { x: number; y: number }\n\nconst isPoint = (point: any): point is { x: number; y: number } =>\n  \"x\" in point && \"y\" in point\n\nexport function distance<P extends Point | number>(a: P, b: P) {\n  if (isNumber(a) && isNumber(b)) {\n    return distance1D(a, b)\n  }\n  if (isPoint(a) && isPoint(b)) {\n    const xDelta = distance1D(a.x, b.x)\n    const yDelta = distance1D(a.y, b.y)\n    return Math.sqrt(xDelta ** 2 + yDelta ** 2)\n  }\n  return 0\n}\n"]},"metadata":{},"sourceType":"module"}