{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { getDefaultState } from './mutation';\nimport { notifyManager } from './notifyManager';\nimport { Subscribable } from './subscribable'; // CLASS\n\nexport var MutationObserver = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(MutationObserver, _Subscribable);\n\n  function MutationObserver(client, options) {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.client = client;\n\n    _this.setOptions(options);\n\n    _this.bindMethods();\n\n    _this.updateResult();\n\n    return _this;\n  }\n\n  var _proto = MutationObserver.prototype;\n\n  _proto.bindMethods = function bindMethods() {\n    this.mutate = this.mutate.bind(this);\n    this.reset = this.reset.bind(this);\n  };\n\n  _proto.setOptions = function setOptions(options) {\n    this.options = this.client.defaultMutationOptions(options);\n  };\n\n  _proto.onUnsubscribe = function onUnsubscribe() {\n    if (!this.listeners.length) {\n      var _this$currentMutation;\n\n      (_this$currentMutation = this.currentMutation) == null ? void 0 : _this$currentMutation.removeObserver(this);\n    }\n  };\n\n  _proto.onMutationUpdate = function onMutationUpdate(action) {\n    this.updateResult(); // Determine which callbacks to trigger\n\n    var notifyOptions = {\n      listeners: true\n    };\n\n    if (action.type === 'success') {\n      notifyOptions.onSuccess = true;\n    } else if (action.type === 'error') {\n      notifyOptions.onError = true;\n    }\n\n    this.notify(notifyOptions);\n  };\n\n  _proto.getCurrentResult = function getCurrentResult() {\n    return this.currentResult;\n  };\n\n  _proto.reset = function reset() {\n    this.currentMutation = undefined;\n    this.updateResult();\n    this.notify({\n      listeners: true\n    });\n  };\n\n  _proto.mutate = function mutate(variables, options) {\n    this.mutateOptions = options;\n\n    if (this.currentMutation) {\n      this.currentMutation.removeObserver(this);\n    }\n\n    this.currentMutation = this.client.getMutationCache().build(this.client, _extends({}, this.options, {\n      variables: typeof variables !== 'undefined' ? variables : this.options.variables\n    }));\n    this.currentMutation.addObserver(this);\n    return this.currentMutation.execute();\n  };\n\n  _proto.updateResult = function updateResult() {\n    var state = this.currentMutation ? this.currentMutation.state : getDefaultState();\n\n    var result = _extends({}, state, {\n      isLoading: state.status === 'loading',\n      isSuccess: state.status === 'success',\n      isError: state.status === 'error',\n      isIdle: state.status === 'idle',\n      mutate: this.mutate,\n      reset: this.reset\n    });\n\n    this.currentResult = result;\n  };\n\n  _proto.notify = function notify(options) {\n    var _this2 = this;\n\n    notifyManager.batch(function () {\n      // First trigger the mutate callbacks\n      if (_this2.mutateOptions) {\n        if (options.onSuccess) {\n          _this2.mutateOptions.onSuccess == null ? void 0 : _this2.mutateOptions.onSuccess(_this2.currentResult.data, _this2.currentResult.variables, _this2.currentResult.context);\n          _this2.mutateOptions.onSettled == null ? void 0 : _this2.mutateOptions.onSettled(_this2.currentResult.data, null, _this2.currentResult.variables, _this2.currentResult.context);\n        } else if (options.onError) {\n          _this2.mutateOptions.onError == null ? void 0 : _this2.mutateOptions.onError(_this2.currentResult.error, _this2.currentResult.variables, _this2.currentResult.context);\n          _this2.mutateOptions.onSettled == null ? void 0 : _this2.mutateOptions.onSettled(undefined, _this2.currentResult.error, _this2.currentResult.variables, _this2.currentResult.context);\n        }\n      } // Then trigger the listeners\n\n\n      if (options.listeners) {\n        _this2.listeners.forEach(function (listener) {\n          listener(_this2.currentResult);\n        });\n      }\n    });\n  };\n\n  return MutationObserver;\n}(Subscribable);","map":{"version":3,"sources":["/home/mark/Desktop/Challenges/Blockchain/Owner/react-site/node_modules/react-query/es/core/mutationObserver.js"],"names":["_extends","_inheritsLoose","getDefaultState","notifyManager","Subscribable","MutationObserver","_Subscribable","client","options","_this","call","setOptions","bindMethods","updateResult","_proto","prototype","mutate","bind","reset","defaultMutationOptions","onUnsubscribe","listeners","length","_this$currentMutation","currentMutation","removeObserver","onMutationUpdate","action","notifyOptions","type","onSuccess","onError","notify","getCurrentResult","currentResult","undefined","variables","mutateOptions","getMutationCache","build","addObserver","execute","state","result","isLoading","status","isSuccess","isError","isIdle","_this2","batch","data","context","onSettled","error","forEach","listener"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { getDefaultState } from './mutation';\nimport { notifyManager } from './notifyManager';\nimport { Subscribable } from './subscribable';\n// CLASS\nexport var MutationObserver = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(MutationObserver, _Subscribable);\n\n  function MutationObserver(client, options) {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.client = client;\n\n    _this.setOptions(options);\n\n    _this.bindMethods();\n\n    _this.updateResult();\n\n    return _this;\n  }\n\n  var _proto = MutationObserver.prototype;\n\n  _proto.bindMethods = function bindMethods() {\n    this.mutate = this.mutate.bind(this);\n    this.reset = this.reset.bind(this);\n  };\n\n  _proto.setOptions = function setOptions(options) {\n    this.options = this.client.defaultMutationOptions(options);\n  };\n\n  _proto.onUnsubscribe = function onUnsubscribe() {\n    if (!this.listeners.length) {\n      var _this$currentMutation;\n\n      (_this$currentMutation = this.currentMutation) == null ? void 0 : _this$currentMutation.removeObserver(this);\n    }\n  };\n\n  _proto.onMutationUpdate = function onMutationUpdate(action) {\n    this.updateResult(); // Determine which callbacks to trigger\n\n    var notifyOptions = {\n      listeners: true\n    };\n\n    if (action.type === 'success') {\n      notifyOptions.onSuccess = true;\n    } else if (action.type === 'error') {\n      notifyOptions.onError = true;\n    }\n\n    this.notify(notifyOptions);\n  };\n\n  _proto.getCurrentResult = function getCurrentResult() {\n    return this.currentResult;\n  };\n\n  _proto.reset = function reset() {\n    this.currentMutation = undefined;\n    this.updateResult();\n    this.notify({\n      listeners: true\n    });\n  };\n\n  _proto.mutate = function mutate(variables, options) {\n    this.mutateOptions = options;\n\n    if (this.currentMutation) {\n      this.currentMutation.removeObserver(this);\n    }\n\n    this.currentMutation = this.client.getMutationCache().build(this.client, _extends({}, this.options, {\n      variables: typeof variables !== 'undefined' ? variables : this.options.variables\n    }));\n    this.currentMutation.addObserver(this);\n    return this.currentMutation.execute();\n  };\n\n  _proto.updateResult = function updateResult() {\n    var state = this.currentMutation ? this.currentMutation.state : getDefaultState();\n\n    var result = _extends({}, state, {\n      isLoading: state.status === 'loading',\n      isSuccess: state.status === 'success',\n      isError: state.status === 'error',\n      isIdle: state.status === 'idle',\n      mutate: this.mutate,\n      reset: this.reset\n    });\n\n    this.currentResult = result;\n  };\n\n  _proto.notify = function notify(options) {\n    var _this2 = this;\n\n    notifyManager.batch(function () {\n      // First trigger the mutate callbacks\n      if (_this2.mutateOptions) {\n        if (options.onSuccess) {\n          _this2.mutateOptions.onSuccess == null ? void 0 : _this2.mutateOptions.onSuccess(_this2.currentResult.data, _this2.currentResult.variables, _this2.currentResult.context);\n          _this2.mutateOptions.onSettled == null ? void 0 : _this2.mutateOptions.onSettled(_this2.currentResult.data, null, _this2.currentResult.variables, _this2.currentResult.context);\n        } else if (options.onError) {\n          _this2.mutateOptions.onError == null ? void 0 : _this2.mutateOptions.onError(_this2.currentResult.error, _this2.currentResult.variables, _this2.currentResult.context);\n          _this2.mutateOptions.onSettled == null ? void 0 : _this2.mutateOptions.onSettled(undefined, _this2.currentResult.error, _this2.currentResult.variables, _this2.currentResult.context);\n        }\n      } // Then trigger the listeners\n\n\n      if (options.listeners) {\n        _this2.listeners.forEach(function (listener) {\n          listener(_this2.currentResult);\n        });\n      }\n    });\n  };\n\n  return MutationObserver;\n}(Subscribable);"]},"metadata":{},"sourceType":"module"}