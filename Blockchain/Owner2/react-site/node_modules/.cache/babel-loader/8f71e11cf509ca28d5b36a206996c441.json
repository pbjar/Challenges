{"ast":null,"code":"import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { notifyManager } from './notifyManager';\nimport { Mutation } from './mutation';\nimport { matchMutation, noop } from './utils';\nimport { Subscribable } from './subscribable'; // TYPES\n// CLASS\n\nexport var MutationCache = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(MutationCache, _Subscribable);\n\n  function MutationCache(config) {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.config = config || {};\n    _this.mutations = [];\n    _this.mutationId = 0;\n    return _this;\n  }\n\n  var _proto = MutationCache.prototype;\n\n  _proto.build = function build(client, options, state) {\n    var mutation = new Mutation({\n      mutationCache: this,\n      mutationId: ++this.mutationId,\n      options: client.defaultMutationOptions(options),\n      state: state,\n      defaultOptions: options.mutationKey ? client.getMutationDefaults(options.mutationKey) : undefined\n    });\n    this.add(mutation);\n    return mutation;\n  };\n\n  _proto.add = function add(mutation) {\n    this.mutations.push(mutation);\n    this.notify(mutation);\n  };\n\n  _proto.remove = function remove(mutation) {\n    this.mutations = this.mutations.filter(function (x) {\n      return x !== mutation;\n    });\n    mutation.cancel();\n    this.notify(mutation);\n  };\n\n  _proto.clear = function clear() {\n    var _this2 = this;\n\n    notifyManager.batch(function () {\n      _this2.mutations.forEach(function (mutation) {\n        _this2.remove(mutation);\n      });\n    });\n  };\n\n  _proto.getAll = function getAll() {\n    return this.mutations;\n  };\n\n  _proto.find = function find(filters) {\n    if (typeof filters.exact === 'undefined') {\n      filters.exact = true;\n    }\n\n    return this.mutations.find(function (mutation) {\n      return matchMutation(filters, mutation);\n    });\n  };\n\n  _proto.findAll = function findAll(filters) {\n    return this.mutations.filter(function (mutation) {\n      return matchMutation(filters, mutation);\n    });\n  };\n\n  _proto.notify = function notify(mutation) {\n    var _this3 = this;\n\n    notifyManager.batch(function () {\n      _this3.listeners.forEach(function (listener) {\n        listener(mutation);\n      });\n    });\n  };\n\n  _proto.onFocus = function onFocus() {\n    this.resumePausedMutations();\n  };\n\n  _proto.onOnline = function onOnline() {\n    this.resumePausedMutations();\n  };\n\n  _proto.resumePausedMutations = function resumePausedMutations() {\n    var pausedMutations = this.mutations.filter(function (x) {\n      return x.state.isPaused;\n    });\n    return notifyManager.batch(function () {\n      return pausedMutations.reduce(function (promise, mutation) {\n        return promise.then(function () {\n          return mutation.continue().catch(noop);\n        });\n      }, Promise.resolve());\n    });\n  };\n\n  return MutationCache;\n}(Subscribable);","map":{"version":3,"sources":["/home/mark/Desktop/Challenges/Blockchain/Owner/react-site/node_modules/react-query/es/core/mutationCache.js"],"names":["_inheritsLoose","notifyManager","Mutation","matchMutation","noop","Subscribable","MutationCache","_Subscribable","config","_this","call","mutations","mutationId","_proto","prototype","build","client","options","state","mutation","mutationCache","defaultMutationOptions","defaultOptions","mutationKey","getMutationDefaults","undefined","add","push","notify","remove","filter","x","cancel","clear","_this2","batch","forEach","getAll","find","filters","exact","findAll","_this3","listeners","listener","onFocus","resumePausedMutations","onOnline","pausedMutations","isPaused","reduce","promise","then","continue","catch","Promise","resolve"],"mappings":"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","sourcesContent":["import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { notifyManager } from './notifyManager';\nimport { Mutation } from './mutation';\nimport { matchMutation, noop } from './utils';\nimport { Subscribable } from './subscribable'; // TYPES\n\n// CLASS\nexport var MutationCache = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(MutationCache, _Subscribable);\n\n  function MutationCache(config) {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.config = config || {};\n    _this.mutations = [];\n    _this.mutationId = 0;\n    return _this;\n  }\n\n  var _proto = MutationCache.prototype;\n\n  _proto.build = function build(client, options, state) {\n    var mutation = new Mutation({\n      mutationCache: this,\n      mutationId: ++this.mutationId,\n      options: client.defaultMutationOptions(options),\n      state: state,\n      defaultOptions: options.mutationKey ? client.getMutationDefaults(options.mutationKey) : undefined\n    });\n    this.add(mutation);\n    return mutation;\n  };\n\n  _proto.add = function add(mutation) {\n    this.mutations.push(mutation);\n    this.notify(mutation);\n  };\n\n  _proto.remove = function remove(mutation) {\n    this.mutations = this.mutations.filter(function (x) {\n      return x !== mutation;\n    });\n    mutation.cancel();\n    this.notify(mutation);\n  };\n\n  _proto.clear = function clear() {\n    var _this2 = this;\n\n    notifyManager.batch(function () {\n      _this2.mutations.forEach(function (mutation) {\n        _this2.remove(mutation);\n      });\n    });\n  };\n\n  _proto.getAll = function getAll() {\n    return this.mutations;\n  };\n\n  _proto.find = function find(filters) {\n    if (typeof filters.exact === 'undefined') {\n      filters.exact = true;\n    }\n\n    return this.mutations.find(function (mutation) {\n      return matchMutation(filters, mutation);\n    });\n  };\n\n  _proto.findAll = function findAll(filters) {\n    return this.mutations.filter(function (mutation) {\n      return matchMutation(filters, mutation);\n    });\n  };\n\n  _proto.notify = function notify(mutation) {\n    var _this3 = this;\n\n    notifyManager.batch(function () {\n      _this3.listeners.forEach(function (listener) {\n        listener(mutation);\n      });\n    });\n  };\n\n  _proto.onFocus = function onFocus() {\n    this.resumePausedMutations();\n  };\n\n  _proto.onOnline = function onOnline() {\n    this.resumePausedMutations();\n  };\n\n  _proto.resumePausedMutations = function resumePausedMutations() {\n    var pausedMutations = this.mutations.filter(function (x) {\n      return x.state.isPaused;\n    });\n    return notifyManager.batch(function () {\n      return pausedMutations.reduce(function (promise, mutation) {\n        return promise.then(function () {\n          return mutation.continue().catch(noop);\n        });\n      }, Promise.resolve());\n    });\n  };\n\n  return MutationCache;\n}(Subscribable);"]},"metadata":{},"sourceType":"module"}